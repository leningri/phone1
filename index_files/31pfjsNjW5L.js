(function(f){var g=window.AmazonUIPageJS||window.P,k=g._namespace||g.attributeErrors,b=k?k("MarsContentGridAssets",""):g;b.guardFatal?b.guardFatal(f)(b,window):b.execute(function(){f(b,window)})})(function(f,g,k){f.when("A","videojs","MarsContentGridAccessibilityProcessor").register("MarsContentGridController",function(b,h,c){return b.createClass({init:function(d,e){this._model=d;this._view=e;this._model.setVideoInstance(this._initVideoPlayer());this._model.getHidePlayButton()&&this._hidePlayButton();
this._model.isAutoplay()&&this._bindEvents();var a=this;this._model.getVideoInstance().on("ready",function(){c.getInstance().requestProcessVideoJsMarkup(a._view.getParentContainer())})},_bindEvents:function(){this._bindAutoplayPause();this._bindAutoplayFullscreen();this._bindOnClick();this._bindAutoplayStart()},_initVideoPlayer:function(){var d=this._model.getVideoURL(),e=/\.[0-9a-z]+$/i;"string"!==typeof d||e.test(d)||(d+=".mp4");var e=this._model.getParentID(),a=this._model.getVideoID(),c=document.createElement("video");
c.type="video/mp4";c.id=a;c.setAttribute("webkit-playsinline","webkit-playsinline");c.setAttribute("playsinline","playsinline");document.getElementById(e).appendChild(c);e=h(c);e.src(d);e.controls(!0);e.addClass("video-js");e.addClass("content-grid-video");e.addClass("vjs-big-play-button");e.addClass("vjs-big-play-centered");e.addClass("mako-cg-poster");e.poster(this._model.getPosterURL());return e},_bindAutoplayPause:function(){var d=this;this._model.getVideoInstance().onpause=function(){d._view.isVideoInViewport()&&
d._model.setCustomerClickedVideo(!0)}},_bindAutoplayStart:function(){var d=this._model.getVideoInstance(),c=b.$;d.muted(!0);this._playPauseVideoInViewport();b.on.scroll(c.proxy(this._playPauseVideoInViewport,this))},_bindAutoplayFullscreen:function(){var d=this;this._model.getVideoInstance().onfullscreenchange=function(){d._model.setCustomerClickedVideo(!0)}},_playPauseVideoInViewport:function(){var d=this._model.getVideoInstance();this._model.getCustomerClickedVideo()||(this._view.isVideoInViewport()?
d.paused()&&d.play():d.paused()||d.pause())},_bindOnClick:function(){var d=this;this._model.getVideoInstance().on("click",function(){d._model.setCustomerClickedVideo(!0)})},_hidePlayButton:function(){var d=this._model.getVideoInstance();d.addClass("hide-big-play-button");d.addClass("mako-cg-play-button")},destroy:function(){this._view=this._model=null}})});"use strict";f.when("A","MarsContentGridController","MarsContentGridModel","MarsContentGridView","ready").register("MarsContentGridFactory",function(b,
h,c,d){var e=[];return{get:function(a){a=new h(new c(a),new d(a));e.push(a);return a},destroyAll:function(){e.forEach(function(a){a.destroy()});e=[]}}});"use strict";f.when("A","MakoCommonCartHelper","a-modal","ContentGridConstants","marsRefTagUtils").register("MarsContentGridInterstitial",function(b,h,c,d,e){var a=b.$,m,l=b.createClass({create:function(a,d,c,e){this.interstitialName=a;this.clientName=d;this.isMobile=e;this.header=c;this.baseReftag="MarsContentGrid_"+a;this._bindEvents()},_bindEvents:function(){a("form#addToCart").find('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').bind("click",
a.proxy(this._handleAtcEvent,this,"form#addToCart",'input#add-to-cart-button[name\x3d"submit.add-to-cart"]'));a("form#addToCart").find('input#installments-button[name\x3d"submit.installments"]').bind("click",a.proxy(this._handleAtcEvent,this,"form#addToCart",'input#installments-button[name\x3d"submit.installments"]'));a("form#addToCart").find('input#buy-now-button[name\x3d"submit.buy-now"]').bind("click",a.proxy(this._handleAtcEvent,this,"form#addToCart",'input#buy-now-button[name\x3d"submit.buy-now"]'));
a("form#buyNow").find('input#buy-now-button[type\x3d"submit"]').bind("click",a.proxy(this._handleAtcEvent,this,"form#buyNow",'input#buy-now-button[type\x3d"submit"]'));a("form#mobile-installments").find('input#installments-button[name\x3d"submit.installments"]').bind("click",a.proxy(this._handleAtcEvent,this,"form#mobile-installments",'input#installments-button[name\x3d"submit.installments"]'))},_handleAtcEvent:function(c,e,b){var m=this;b.preventDefault();b=a(c);var l=a('#buybox select[name\x3d"quantity"]').val(),
g,k;"form#buyNow"===c?(g=b.find('input[type\x3d"hidden"][name\x3d"asin"]').val(),k=b.find('input[type\x3d"hidden"][name\x3d"offeringID"]').val(),c=b.find('input[type\x3d"hidden"][name\x3d"sessionID"]').val()):this.isMobile?(g=b.find('input[type\x3d"hidden"][name\x3d"a"]').val(),k=b.find('input[type\x3d"hidden"][name\x3d"oid"]').val(),c=b.find('input[type\x3d"hidden"][name\x3d"verificationSessionID"]').val()):(g=b.find(e).val(),k=b.find('input[type\x3d"hidden"][name\x3d"offerListingID"]').val(),c=
b.find('input[type\x3d"hidden"][name\x3d"session-id"]').val());c=h.createRequest(c,this.clientName);c.addAsinData(g,k,l).setReftag("MarsContentGrid__ATC");c.sendRequest().done(function(a){m._showInterstitial()}).fail(function(a){f.log("An error has occurred with common cart handler with: "+a+" for asin: "+g+", offerListingId: "+k+", quantity: "+l,d.FATAL_LOG_LEVEL,d.ATTRIBUTION)})},_showInterstitial:function(){var d={dataStrategy:"preload",name:this.interstitialName,header:this.header},b="#"+this._getCamelCaseFromSnakeCase(this.interstitialName);
if(this.isMobile)f.when("a-secondary-view").execute(function(c){var h=c.get(this.interstitialName);h||(h=c.create(a(b),d));h.show();e.send(this.baseReftag+"_InterstitialOpened")});else{var h=c.get(this.interstitialName);h||(h=c.create(a(b),d));h.show();e.send(this.baseReftag+"_InterstitialOpened")}},_getCamelCaseFromSnakeCase:function(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})}});return{getInstance:function(){m||(m=new l);return m}}});"use strict";f.when("A").register("MarsContentGridModel",
function(b){return b.createClass({init:function(b){this._videoURL=b.URL;this._videoID=b.ID;this._autoplay="string"===typeof b.autoplay?"true"===b.autoplay:b.autoplay;this._hidePlayButton="string"===typeof b.hidePlayButton?"true"===b.hidePlayButton:b.hidePlayButton;this._customerClickedVideo=!1;this._posterURL=b.posterURL;this._parentID=b.parentID},getVideoInstance:function(){return this._videoInstance},getSWFURL:function(){return SWF_URL},getVideoURL:function(){return this._videoURL},getVideoID:function(){return this._videoID},
getHidePlayButton:function(){return this._hidePlayButton},getCustomerClickedVideo:function(){return this._customerClickedVideo},getPosterURL:function(){return this._posterURL},getParentID:function(){return this._parentID},isAutoplay:function(){return this._autoplay},setVideoInstance:function(b){this._videoInstance=b},setCustomerClickedVideo:function(b){this._customerClickedVideo=b}})});"use strict";f.when("A").register("MarsContentGridView",function(b,h){var c=b.$;return b.createClass({init:function(c){this._parentContainer=
document.getElementById(c.parentID)},getParentContainer:function(){return this._parentContainer},isVideoInViewport:function(){try{var b=this.getParentContainer();if(b&&b.getBoundingClientRect){var e=c(g),a=this.getParentContainer().getBoundingClientRect();return 0<a.bottom&&0<a.right&&a.top<e.height()&&a.left<e.width()}}catch(h){}return!1}})});f.when("A","marsRefTagUtils").register("MarsContentGridModal",function(b,h){var c,d=b.createClass({create:function(c,a,d,l){var g=b.$,g=g("#"+a.replace(/-([a-z])/g,
function(a){return a[1].toUpperCase()})),k=g.parent(),n={name:a};l?b.capabilities.isAmazonApp&&(n.hideHeader=!0,f.when("a-secondary-view").execute(function(a){k.attr("data-a-secondary-view",JSON.stringify(n))})):f.when("a-modal").execute(function(a){n.header=d;n.width="750";k.attr("data-a-modal",JSON.stringify(n))});g.one("click",function(){h.send("mars_content_grid_"+a+"_"+c)})}});return{getInstance:function(){c||(c=new d);return c}}});"use strict";f.when("A").register("MarsContentGridAccessibilityProcessor",
function(b,h){var c=b.$,d,e=b.createClass({init:function(){this.hasPageLoaded="complete"===document.readyState||!1;this.doProcessMarkup=!1;this.videoJsContainers=[];this.hasPageLoaded||this._bindPageReadyEvents()},requestProcessMarkup:function(){this.hasPageLoaded?this._processLinksForAriaLabel():this.doProcessMarkup=!0},requestProcessVideoJsMarkup:function(a){!a||!a instanceof c||!a instanceof HTMLElement||(a instanceof HTMLElement&&(a=c(a)),this.hasPageLoaded?this._processVideoJsMarkup(a):this.videoJsContainers.push(a))},
_bindPageReadyEvents:function(){var a=this;f.when("ready").execute(function(){a.hasPageLoaded=!0;a.doProcessMarkup&&a._processLinksForAriaLabel();if(a.videoJsContainers.length){for(var c=0;c<a.videoJsContainers.length;c++)a._processVideoJsMarkup(a.videoJsContainers[c]);a.videoJsContainers=[]}})},_processLinksForAriaLabel:function(){c(".content-grid-row-wrapper").find("a[title]").each(function(a,b){a=c(b);a.attr("aria-label")||a.attr("aria-label",a.attr("title"))})},_processVideoJsMarkup:function(a){c(a).find("button.vjs-menu-button[title]").each(function(a,
b){b=c(b);a=b.attr("title");b.attr("aria-label")||b.attr("aria-label",a);b=b.parent().find(".vjs-menu-content");b.attr("aria-label")||b.attr("aria-label",a)})}});return{getInstance:function(){d||(d=new e);return d}}});"use strict";f.declare("ContentGridConstants",{ATTRIBUTION:"MarsContentGridAssets",FATAL_LOG_LEVEL:"FATAL"});"use strict";f.when("A").register("marsRefTagUtils",function(b){var h=b.$;return{send:function(b,d){if(!b)throw Error("refTag is not defined");h.get((d||"/gp/product/ajax-handlers/reftag.html")+
"/ref\x3d"+b)}}});"use strict";f.execute("mako-vse-light-player.js",function(){function b(b,c,d){d===k&&(d=c,c=b,b=[]);f.now(c).execute("Registrant",function(e){e===k&&f.when.apply(f,b).register(c,d)})}b(["A","Mako.VSEHelper","VSEPlayerIntegrationWithMako"],"Mako.IVSELightPlayer",function(b,c,d){var e=["videoUrl"];return{render:function(a,f){if("undefined"===typeof f)throw"Argument required: playerParentId";for(var g=0;g<e.length;g++){var k=e[g];if(!b.$.trim(a[k]))throw"Argument required: options."+
k;}a={video:{videoURL:a.videoUrl,imageURL:a.imageUrl},locale:a.locale||c.getLocale(),marketplaceID:a.marketplaceID||c.getMarketplaceId(),page:a.pageType||c.getPageType(),placement:a.placement||"placement_"+f,requester:"Mako",clientPrefix:"mako"+f};d.render(a,f,c.getVideoComponentEndpointHost())}}});b(["A"],"VSEPlayerIntegrationWithMako",function(b){return{render:function(c,d,e){b.ajax(e+"/vap/ew/subcomponent/vseplayer",{params:c,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",
withCredential:!0,timeout:4E3,success:function(a){var c=b.$("#"+d);if(1===c.length)c.html(a);else throw["Did not find the appropriate number of video parent elements.","Expecting 1; found: "+c.length,"Possible reasons: - conflicting players with non-unique ids\n - id name is not formatted correctly\n - parent element was removed or is not available (possibly race condition)"].join("\n");},error:function(a){throw"Error calling VSE player endpoint. "+("string"===typeof a)?a:"";}})}}});b(["A"],"Mako.VSEHelper",
function(b){var c=g.opt||{};return{getMarketplaceId:function(){return c.obfuscatedMarketId||"ATVPDKIKX0DER"},getLocale:function(){return c.language||"en_US"},getPageType:function(){return c.pageType||"Unknown"},getVideoComponentEndpointHost:function(){var b=g.location.host,c="https://www.amazon.com";0<=b.indexOf(".amazon.")&&(c="https://"+b);return c}}})})});