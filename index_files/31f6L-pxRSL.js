(function(h){var g=window.AmazonUIPageJS||window.P,n=g._namespace||g.attributeErrors,b=n?n("MonthlyPaymentsFourXCBDetailPageAssets",""):g;b.guardFatal?b.guardFatal(h)(b,window):b.execute(function(){h(b,window)})})(function(h,g,n){h.when("A").register("monthly-payments-equal-pay-common",function(b){var e=b.$,a={TWISTER_DEBOUNCE_DURATION:300,counter:{checkboxShown:"homer-mp-ep-dp-checkbox-shown",checkboxHiddenHtmlUnrecognized:"homer-mp-ep-dp-checkbox-hidden-html-unrecognized",checkboxHiddenMissingPaymentOfferInfo:"hom-mp-ep-dp-checkbox-hidden-missing-paymentOfferInfo",
checkboxHiddenOneClickDetected:"homer-mp-ep-dp-checkbox-hidden-one-click-detected",checkboxHiddenMissingAddToCartButton:"homer-mp-ep-dp-checkbox-hidden-missing-add-to-cart-button",checkboxHiddenMissingBuyNowButton:"homer-mp-ep-dp-checkbox-hidden-missing-buy-now-button",checkboxHiddenInstallmentsDetected:"homer-mp-ep-dp-checkbox-hidden-installments-detected",checkboxChecked:"homer-mp-ep-dp-checkbox-checked",checkboxUnchecked:"homer-mp-ep-dp-checkbox-unchecked",checkboxCheckedAddToCartClicked:"homer-mp-ep-dp-checkbox-checked-addtocart-clicked",
checkboxCheckedBuynowClicked:"homer-mp-ep-dp-checkbox-checked-buynow-clicked",checkboxUncheckedAddToCartClicked:"homer-mp-ep-dp-checkbox-unchecked-addtocart-clicked",checkboxUncheckedBuynowClicked:"homer-mp-ep-dp-checkbox-unchecked-buynow-clicked",messageAddToCartClicked:"homer-mp-ep-dp-message-addtocart-clicked",messageBuynowClicked:"homer-mp-ep-dp-message-buynow-clicked",messageShown:"homer-mp-ep-dp-message-shown",continueButtonClicked:"homer-mp-ep-dp-continue-button-clicked",tncOpened:"homer-mp-ep-dp-tnc-opened",
tncCheckboxChecked:"homer-mp-ep-dp-tnc-checkbox-checked",tncCheckboxUnchecked:"homer-mp-ep-dp-tnc-checkbox-unchecked",tncNoThankYouOrExit:"homer-mp-ep-dp-tnc-no-thank-you-or-exit",featureNotPresent:"homer-mp-ep-dp-feature-not-present"},reftag:{failedDataInputs:"DATA_INPUTS_NOT_FOUND:",missingPaymentOfferInfo:"MISSING_PAYMENT_OFFER_INFO:",oneClickDetected:"ONE_CLICK_DETECTED:",htmlUnrecognized:"HTML_UNRECOGNIZED:",missingAddToCartButton:"MISSING_ADD_TO_CART_BUTTON:",missingBuyNowButton:"MISSING_BUY_NOW_BUTTON:",
installmentsDetected:"INSTALLMENTS_DETECTED:"},selector:{addToCartButton:"#add-to-cart-button",buyNowButton:"#buy-now-button",oneClickButton:"#one-click-submit-btn",addToCartForm:"form#addToCart",buyNowForm:"form#buyNowCheckout",mobileWebBuyNowForm:"form#buyNow",atcPaymentOfferInfo:"#atcPaymentOfferInfo",bnPaymentOfferInfo:"#bnPaymentOfferInfo",mpEpBuyboxFinancingCheckbox:".mp-ep-buybox-financing-checkbox",monthlyPaymentsFeature:"#monthlyPayments_feature_div",installmentsMobileFeature:"#mobileapp_installmentPaymentAccordionRow",
atcDeclarative:"#atc-declarative",tabletActDeclarative:'.a-declarative[data-action\x3d"add-to-cart"]:has([id\x3d"buybox.addToCart"])',buyBoxAtcData:"#buybox-atc-data",bnSpanFirstChild:"#buyNow \x3e :first",mpPaymentOfferInfo:"#mp-ep-payment-offer-info",mpEpPriceIntegerValue:"#mp-ep-fourxcb-tnc-price-integ-value",mpEpPriceDecimalValue:"#mp-ep-fourxcb-tnc-price-decimal-value",mpEpPriceEuroIcon:"#mp-ep-fourxcb-price-euro-icon"},id:{bnSpan:"buyNow",buyBoxAtcData:"buybox-atc-data",atcPaymentOfferInfo:"atcPaymentOfferInfo",
atcDeclarative:"atc-declarative",bnPaymentOfferInfo:"bnPaymentOfferInfo"},isFeaturePresent:function(){return!(!e(a.selector.monthlyPaymentsFeature).length||!e(a.selector.mpPaymentOfferInfo).length)},logCounter:function(a){g.ue&&g.ue.count&&g.ue.count(a,1)},logRefTag:function(a){e.get("/gp/product/ajax-handlers/reftag.html/ref\x3d"+("MONTHLY_PAYMENTS_FOURXCB_"+a+g.location.href))},urlParam:function(a){try{return(new RegExp("[?\x26]"+a+"\x3d([^\x26#]*)")).exec(g.location.href)[1]||0}catch(b){return 0}},
isCheckboxSelected:function(a){return!!(a&&a.isChecked&&a.isChecked())},updateStateFromCheckbox:function(b,d){a.isCheckboxSelected(b)?d.check():d.uncheck()},isPaymentOfferInfoPresent:function(a){return!!a},getPaymentOfferInfo:function(){var b=e(a.selector.mpPaymentOfferInfo).attr("data-executioninfo");if(b)b=JSON.parse(b);else var b=e(a.selector.mpPaymentOfferInfo).attr("data-installmentType"),d=e(a.selector.mpPaymentOfferInfo).attr("data-installmentSubType"),g=e(a.selector.mpPaymentOfferInfo).attr("data-instrumentType"),
l=e(a.selector.mpPaymentOfferInfo).attr("data-offerType"),c=e(a.selector.mpPaymentOfferInfo).attr("data-productName"),b={installmentType:b,installmentSubType:d,instrumentType:g,offerType:l,productName:c};return b}};return a});h.when("A","a-button","a-checkbox","a-modal","monthly-payments-equal-pay-common").execute("mp-ep-tnc",function(b,e,a,g,d){var h=b.$,l,c=!1,k=a(".mp-ep-buybox-financing-checkbox input[type\x3d'checkbox']"),f=a(".mp-ep-terms-and-conditions-checkbox input[type\x3d'checkbox']"),
p=e(".mp-ep-terms-and-conditions-confirm-button");b.declarative("acceptTermsAndConditionsConfirmButton","click",function(){c=!0;d.updateStateFromCheckbox(f,k);l.hide();d.logCounter(d.counter.continueButtonClicked)});b.declarative("acceptTermsAndConditionsCancelButton","click",function(){c=!1;l.hide()});b.declarative("selectMonthlyPaymentsEqualPayCheckbox","click",function(){k&&d.updateStateFromCheckbox(k,f)});b.declarative("selectEqualPayTermsAndConditionsCheckbox","click",function(){f.isChecked()?
d.logCounter(d.counter.tncCheckboxChecked):d.logCounter(d.counter.tncCheckboxUnchecked)});var q=b.debounce(function(){k=a(".mp-ep-buybox-financing-checkbox input[type\x3d'checkbox']");f=a(".mp-ep-terms-and-conditions-checkbox input[type\x3d'checkbox']");p=e(".mp-ep-terms-and-conditions-confirm-button");k.enable(!0);b.on("a:popover:beforeHide:mp-ep-terms-and-conditions-content",function(){c||d.logCounter(d.counter.tncNoThankYouOrExit)});b.on("a:popover:afterShow:mp-ep-terms-and-conditions-content",
function(){l||(l=g.get(h("#mp-ep-terms-and-conditions-popover")));f.isEmpty()&&(f=a(".mp-ep-terms-and-conditions-checkbox input[type\x3d'checkbox']"));p.isEmpty()&&(p=e(".mp-ep-terms-and-conditions-confirm-button"));d.logCounter(d.counter.tncOpened)})},d.TWISTER_DEBOUNCE_DURATION);q();b.on("a:pageUpdate",q)});h.when("A","a-checkbox","monthly-payments-equal-pay-common","a-modal").execute(function(b,e,a){function g(){if(c(a.selector.mpEpPriceIntegerValue).length&&c(a.selector.mpEpPriceDecimalValue).length&&
c(a.selector.mpEpPriceEuroIcon).length){var b=p.split(".");2===b.length&&b[0]&&b[1]&&(c(a.selector.mpEpPriceEuroIcon).text("$"),c(a.selector.mpEpPriceIntegerValue).text(b[0]),c(a.selector.mpEpPriceDecimalValue).text(b[1]))}}function d(b,d){var e="",f=c(a.selector.addToCartForm);b&&(b.cartType=d||"ADD_TO_CART",e=JSON.stringify(b));if(c(a.selector.tabletActDeclarative).length&&h(a.selector.tabletActDeclarative,e))return!0;if(f.length)return b=c(a.selector.atcPaymentOfferInfo),b.length?b.val(e):c("\x3cinput\x3e").attr({type:"hidden",
name:"paymentOfferInfo",value:e,id:a.id.atcPaymentOfferInfo}).appendTo(f),!0}function h(a,b){var d=!1;(a=c(a).data())&&c.each(a,function(a,c){if(c&&c.inputs)return c.inputs.paymentOfferInfo=b,d=!0,!1});return d}function l(){if(c(a.selector.mpEpBuyboxFinancingCheckbox).length)if(f)if(r)a.logRefTag(a.reftag.oneClickDetected),a.logCounter(a.counter.checkboxHiddenOneClickDetected);else if(c(a.selector.installmentsMobileFeature).length)a.logRefTag(a.reftag.installmentsDetected),a.logCounter(a.counter.checkboxHiddenInstallmentsDetected);
else if(t){if(d())return a.logCounter(a.counter.checkboxShown),!1;a.logRefTag(a.reftag.failedDataInputs);a.logCounter(a.counter.checkboxHiddenHtmlUnrecognized)}else a.logRefTag(a.reftag.missingAddToCartButton),a.logCounter(a.counter.checkboxHiddenMissingAddToCartButton);else a.logRefTag(a.reftag.missingPaymentOfferInfo),a.logCounter(a.counter.checkboxHiddenMissingPaymentOfferInfo);else if(a.isPaymentOfferInfoPresent(f))return a.logCounter(a.counter.messageShown),!1;return!0}var c=b.$;if(a.isFeaturePresent()){var k=
!1,f=a.getPaymentOfferInfo(),p=c(a.selector.mpPaymentOfferInfo).attr("data-productPrice"),q=c("span#mp-ep-fourxcb-header-msg"),m=e(a.selector.mpEpBuyboxFinancingCheckbox),n=c(a.selector.monthlyPaymentsFeature),t=!!c(a.selector.addToCartButton).length,r=!!c(a.selector.oneClickButton).length;b.declarative("selectMonthlyPaymentsEqualPayCheckbox","change",function(){a.isCheckboxSelected(m)?(k=!0,d(f),a.logCounter(a.counter.checkboxChecked)):(k=!1,d(),a.logCounter(a.counter.checkboxUnchecked))});var u=
b.debounce(function(){a.isFeaturePresent()?(p=c(a.selector.mpPaymentOfferInfo).attr("data-productPrice"),q=c("span#mp-ep-fourxcb-header-msg"),f=a.getPaymentOfferInfo(),m=e(a.selector.mpEpBuyboxFinancingCheckbox),n=c(a.selector.monthlyPaymentsFeature),t=!!c(a.selector.addToCartButton).length,r=!!c(a.selector.oneClickButton).length,g(),b.capabilities.isAmazonApp&&(q.removeClass("a-size-large"),q.addClass("a-size-medium")),f&&(f.mpDebug="1"===a.urlParam("mpDebug")?"1":"0"),l()?n.hide():(m.enable(!0),
k&&(m.check(),d(f),a.logCounter(a.counter.checkboxChecked))),!c(a.selector.mpEpBuyboxFinancingCheckbox).length&&a.isPaymentOfferInfoPresent(f)&&d(f),c(a.selector.addToCartButton).click(b.debounce(function(){c(a.selector.mpEpBuyboxFinancingCheckbox).length?a.isCheckboxSelected(m)?(d(f,"ADD_TO_CART"),a.logCounter(a.counter.checkboxCheckedAddToCartClicked)):a.logCounter(a.counter.checkboxUncheckedAddToCartClicked):(d(f,"ADD_TO_CART"),a.logCounter(a.counter.messageAddToCartClicked))},4E3,!0)),c(a.selector.buyNowButton).bind("click.financialOptionsCheckout",
b.debounce(function(){c(a.selector.mpEpBuyboxFinancingCheckbox).length?a.isCheckboxSelected(m)?a.logCounter(a.counter.checkboxCheckedBuynowClicked):a.logCounter(a.counter.checkboxUncheckedBuynowClicked):a.logCounter(a.counter.messageBuynowClicked)},4E3,!0)),c(a.selector.buyNowButton).bind("click.financialOptionsCheckout",function(){a.isCheckboxSelected(m)?d(f,"BUY_NOW"):c(a.selector.mpEpBuyboxFinancingCheckbox).length||d(f,"BUY_NOW")})):a.logCounter(a.featureNotPresent)},a.TWISTER_DEBOUNCE_DURATION);
u();b.on("a:pageUpdate",u)}else a.logCounter(a.featureNotPresent)});h.when("A").register("monthly-payments-fourxcb-bottomSheetBackgroundScroller",function(b){b=b.$;var e=b("#a-page"),a=b("body");return{disablePageScrolling:function(){var b=a.scrollTop();e.css({position:"fixed",top:"-"+b+"px"})},enablePageScrolling:function(){var b=Math.abs(e.position().top);e.css({position:"",top:""});a.scrollTop(b)}}})});